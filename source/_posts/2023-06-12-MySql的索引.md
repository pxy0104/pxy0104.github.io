---
title: MySql的索引
date: 2023-06-12 22:06:09
tags: 
- 八股文
- MySql
categories: MySql
---

MySql索引是为了减少IO次数，提高效率
<!-- more -->
# MySQL的索引

提到索引，我们最常看到的大概率就是书本的目录，它可以粗略的被看作是索引，索引能够帮助我们快速查找到我们想要找到的内容。

MySql中的索引也是这个目的，**MySql中建立索引是为了减少磁盘I/O的次数，提交查询效率，在MySql中，索引是帮助MySQL高效获取数据的数据结构。**

## InnoDB中的索引

InnoDB存储引擎支持两种常见的索引数据结构：B+树索引、Hash索引，其中B+树索引是目前关系型数据库系统中最常见、最有效的索引。

B+树是一种多路平衡查找树，它能显著减少IO次数，提高效率。B+树的查询效率更加稳定，因为数据放在叶子节点。B+树能提高范围查询的效率，因为叶子节点指向下一个叶子节点。这些特点使得B+树成为MySQL索引的理想选择。

## B+树

B+树实际上是B树的变种，下图为B+树的结构，B+树是B树的升级版，我们可以观察一下，B树和B+树的区别是什么？<br />![01.png](1681124352508-49872c2b-1c30-4e6c-b98a-f25b6d1db942.png)<br />
B+树和B树的区别是：<br />1）B树的节点(根节点/父节点/中间节点/叶子节点)中没有重复元素，B+树有。<br />2）B树的中间节点会存储数据指针信息，而B+树只有叶子节点才存储。<br />3）B+树的每个叶子节点有一个指针指向下一个节点，把所有的叶子节点串在了一起。

B+树比起B树的优点：<br />1）由于中间节点不存指针，同样大小的磁盘页可以容纳更多的节点元素，树的高度就小。（数据量相同的情况下，B+树比B树更加“矮胖”），查找起来就更快。<br />2）B+树每次查找都必须到叶子节点才能获取数据，而B树不一定，B树可以在非叶子节点上获取数据。因此B+树查找的时间更稳定。<br />3）B+树的每一个叶子节点都有指向下一个叶子节点的指针，方便范围查询和全表查询：只需要从第一个叶子节点开始顺着指针一直扫描下去即可，而B树则要对树做中序遍历。

## 索引

**聚簇索引**：索引和原始数据存放在一起的存储形式，或者整个树形结构中既有索引又有原始数据。聚簇索引都是由主键作为索引值，所以一个表中只有一个聚簇索引。

> 这里我们可以说：主键索引其实就是聚簇索引，这两个名字是从不同的角度来说的。——> 主键索引：是指这个索引是根据主键字段来创建的
> ——> 聚簇索引：是指这个索引的树形结构中是否同时包含了『原始数据』 和『索引目录』

不仅『主键索引』和『聚簇索引』这个两个概念是指同一个东西的两个不同概念，而且它们其实也就是**数据表本身**。也就是说其实我们并没有在原始数据库表之外再另外创建索引表，而是应该说：数据库表本身就是按照 B+Tree 的结构组织起来的，底层就是这么存储的。

**非聚簇索引**：索引和原始数据**没有存放在一起**的存储形式。非聚簇索引都算由非主键字段创建的。
